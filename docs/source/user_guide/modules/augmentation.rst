.. include:: ../../reuse_content/general.rst

.. |a_config| raw:: html

    <a href="https://github.com/DmitryRyumin/OpenAV/blob/develop/openav/rsrs/augmentation.yaml" target="_blank">

Модуль аугментации данных
=========================
Данный модуль позволяет генерировать дополнительные данные с помощью различных параметров аугментации. Команда для запуска аугментации данных:

.. code-block:: sh

   python ./openav/api/augmentation.py --config <путь_к_вашему_конфигурационному_файлу>.yaml


.. important:: Для запуска команды необходимо обязательно указать путь к конфигурационному файлу. Запускать программу необходимо из директории, где она расположена.

Конфигурационный файл
~~~~~~~~~~~~~~~~~~~~~

Конфигурационный файл включает в себя следующие настройки:

*  Отображение процесса выполнения программы в терминале (командной строке)
*  Работа с файловой системой
*  Параметры аугментации данных

.. rst-class:: config-link

|a_config|
Пример конфигурационного файла
|/a|

Отображение процесса выполнения команды в терминале
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. rst-class:: custom-table shell-table
.. csv-table::
   :align: center
   :header: "Параметр", "Тип", "Значение по умолчанию", "Описание"
   :widths: 23, 7, 25, 45

    "hide_metadata", "bool", "``false``", "Включение отображения метаданных"
    "hide_libs_vers", "bool", "``false``", "Включение отображения версий установленных  библиотек  в командной строке"


Работа с файловой системой
~~~~~~~~~~~~~~~~~~~~~~~~~~

.. rst-class:: custom-table filesystem-table
.. csv-table::
   :align: center
   :header: "Параметр", "Тип", "Значение по умолчанию", "Описание"
   :widths: 23, 7, 25, 45

    "path_to_input_directory", "str", "``<путь_к_исходным_данным>``", "Директория, где находятся данные, которые необходимо аугментировать"
    "path_to_output_directory", "str", "``<путь_к_аугментированным_данным>``", "Директория, куда сохраняются аугментированные данные"
    "clear_diraug", "bool", "``true``", "Очистка директории, в которую сохраняются аугментированные данные"
    "depth","int", "``1``", "Глубина иерархии для получения данных. Указывается количество подкаталогов  в директории ``path_to_input_directory``"
    "ext_search_files", "list", "``[""jpg"", ""png""]``", "Список  расширений файлов, которые будут обрабатываться"


Параметры аугментации данных
~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. rst-class:: custom-table vad-table
.. csv-table::
   :align: center
   :header: "Параметр", "Тип", "Значение по умолчанию", "Описание"
   :widths: 28, 7, 15, 50

   "crop_px_min", "int", "``0``", "Минимальное количество пикселей для обрезки изображения с каждой стороны. Диапазон значений от ``0`` и ``1000000``"
   "crop_px_max", "int", "``16``", "Максимальное количество пикселей для обрезки изображения с каждой стороны. Диапазон значений от ``0`` и ``1000000``"
   "crop_percent_min", "float", "``0``", "Минимальный процент для обрезки изображения с каждой стороны. Диапазон значений от ``0`` и ``1.0``"
   "crop_percent_max", "float", "``0.5``", "Максимальный процент для обрезки изображения с каждой стороны. Диапазон значений от ``0`` и ``1.0``"
   "flip_lr_probability", "float", "``0.5``", "Значение коэффициента вероятности отражения по вертикальной оси. Диапазон значений от ``0`` и ``1.0``"
   "flip_ud_probability", "float", "``0.5``", "Значение коэффициента вероятности отражения по горизонтальной оси. Диапазон значений от ``0`` и ``1.0``"
   "blur_min", "float", "``0``", "Минимальное значение коэффициента размытия изображения. Диапазон значений от ``0`` и ``3.0``"
   "blur_max", "float", "``1``", "Максимальное значение коэффициента размытия изображения. Диапазон значений от ``0`` и ``3.0``"
   "scale_x_min", "float", "``0.5``", "Минимальное значение масштабирования по оси X. Диапазон значений от ``0`` и ``10.0``"
   "scale_x_max", "float", "``2``", "Максимальное значение масштабирования по оси X. Диапазон значений от ``0`` и ``10.0``"
   "scale_y_min", "float", "``0.5``", "Минимальное значение масштабирования по оси Y. Диапазон значений от ``0`` и ``10.0``"
   "scale_y_max", "float", "``2``", "Максимальное значение масштабирования по оси X. Диапазон значений от ``0`` и ``10.0``"
   "rotate_min", "int", "``-45``", "Минимальное значение угла поворота изображения. Диапазон значений от ``-90`` и ``90``"
   "rotate_max", "int", "``45``", "Максимальное значение угла поворота изображения. Диапазон значений от ``-90`` и ``90``"
   "contrast_min", "float", "``0``", "Минимальное значение коэффициента контрастности. Диапазон значений от ``-10.0`` и ``10.0``"
   "contrast_max", "float", "``1.0``", "Максимальное значение коэффициента контрастности. Диапазон значений от ``-10.0`` и ``10.0``"
   "alpha", "float", "``0.7``", "Значения коэффициента MixUp. Диапазон значений от ``0`` и ``1.0``"
   "count", "int", "``5``", "Количество применений процесса аугментации к изображению"

Примеры
~~~~~~~

Ниже приведен ряд изображений, сгенерированных с помощью модуля аугментации данных.

.. figure:: ../../_static/img/augmentation/examples.png
        :align: center
        :alt: Примеры аугментированных изображений

        |br|
